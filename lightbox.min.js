var ezoom={};ezoom={thisImg:null,rotate:0,scale:1,grabbing:!1,translateX:0,translateY:0,isShowed:!1,imgTag:null,zoomModal:null,options:null,onInit:function(o,e){e=e||{},ezoom.options=e,ezoom.createZoomModalTag(),ezoom.options.src&&"string"==typeof ezoom.options.src?o.on("click",function(o){ezoom.thisImg=$(this),ezoom.show(ezoom.options.src)}):o.addClass("ezoom").on("click",function(o){ezoom.thisImg=$(this),ezoom.show(ezoom.thisImg.attr("src"))}),ezoom.initMouseScrolling(),ezoom.initEvent()},createZoomModalTag:function(){if(!($("#zoomModal").length>0)){var o=$('<div id="zoomModal" class="modal" style="display:none;position:fixed;z-index: 1000000;padding:0px 0;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,0.8);transition:.3s"></div>'),e=$('<span title="Close" class="btn btn-outline-secondary cursor-pointer fa-undo fas lh-base position-fixed rounded-circle shadow z-1" id="close" style="bottom:15px;right:30px;font-size:20px;font-weight:700;transition:.3s"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" fill="currentColor" class="w-20px h-20px"><path d="M315.3 411.3c-6.253 6.253-16.37 6.253-22.63 0L160 278.6l-132.7 132.7c-6.253 6.253-16.37 6.253-22.63 0c-6.253-6.253-6.253-16.37 0-22.63L137.4 256L4.69 123.3c-6.253-6.253-6.253-16.37 0-22.63c6.253-6.253 16.37-6.253 22.63 0L160 233.4l132.7-132.7c6.253-6.253 16.37-6.253 22.63 0c6.253 6.253 6.253 16.37 0 22.63L182.6 256l132.7 132.7C321.6 394.9 321.6 405.1 315.3 411.3z"/></svg></span > '),t=$('<span title="Rotate right" class="btn btn-outline-secondary cursor-pointer fa-undo fas lh-base position-fixed rounded-circle shadow z-1" id="close" style="bottom:15px;right:150px;font-size:20px;font-weight:700;transition:.3s"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor" class="w-20px h-20px"><path d="M30.81 49.81c8.969-3.656 19.28-1.656 26.16 5.219l41.1 41.1c41.07-40.38 97.11-64.92 157.1-64.92C379.6 32.11 480 132.5 480 256s-100.4 223.9-223.9 223.9c-52.31 0-103.3-18.33-143.5-51.77c-10.19-8.5-11.56-23.62-3.062-33.81c8.531-10.22 23.62-11.56 33.81-3.062C174.9 417.5 214.9 432 256 432c97.03 0 176-78.97 176-176S353 80 256 80c-47.08 0-90.93 19.29-123.2 50.89l52.14 52.14c6.875 6.875 8.906 17.19 5.219 26.16C186.5 218.2 177.7 224 168 224h-128C26.75 224 16 213.3 16 200v-128C16 62.28 21.84 53.53 30.81 49.81z"/></svg></span>'),n=$('<span title="Rotate left" class="btn btn-outline-secondary cursor-pointer fa-undo fas lh-base position-fixed rounded-circle shadow z-1" id="close" style="bottom:15px;right:90px;font-size:20px;font-weight:700;transition:.3s"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-20px h-20px" fill="currentColor"><path d="M496 72v128C496 213.3 485.3 224 472 224h-128c-13.19 0-24-10.66-24-23.98c0-6.247 2.432-12.39 7.033-16.99L379.2 130.9C346.9 99.29 303.1 80 256 80C158.1 80 80 158.1 80 256s78.97 176 176 176c81.21 0 107.1-46.34 127.1-46.34c10.18 0 24.02 8.003 24.02 24.01c0 25.11-75.1 70.27-152.1 70.27c-123.5 0-223.9-100.4-223.9-223.9s100.4-223.1 223.9-223.1c60.03 0 116 24.58 157.1 64.95l41.1-41.1c4.601-4.601 10.74-7.019 16.99-7.019C485.4 48.01 496 58.83 496 72z"/></svg></span>'),i=$('<img title="Please scroll the mouse pointer to zoom in/out the image." class="" style="border-radius:5px;cursor:move;margin:auto;display:block;max-width:100%;max-height:100%" id="zoomModalImg">');ezoom.options.hideControlBtn||o.append(t,n),o.append(i,e),$("body").append(o),ezoom.imgTag=i,ezoom.zoomModal=o,e.on("click",ezoom.remove),t.on("click",function(){ezoom.doRotate("right")}),n.on("click",function(){ezoom.doRotate("left")})}},show:function(o){ezoom.isShow=!0,ezoom.reset(),$("#zoomModal").show(),$("#zoomModal #zoomModalImg").attr("src",o),ezoom.poscalSizeAndPosition(),ezoom.options.onShow,"function"==typeof ezoom.options.onShow&&ezoom.options.onShow(ezoom)},remove:function(o){ezoom.isShow=!1,$("#zoomModal #zoomModalImg").attr("src",""),$("#zoomModal").hide(),ezoom.setTransformOrigin(1,null,0,0),ezoom.options.onClose,"function"==typeof ezoom.options.onClose&&ezoom.options.onClose(ezoom)},doRotate:function(o){const e="left"==o?"-90":"+90";ezoom.rotate=(ezoom.rotate+ +e)%360,ezoom.setTransformOrigin(1,null,0,0),ezoom.options.onRotate,"function"==typeof ezoom.options.onRotate&&ezoom.options.onRotate(ezoom)},reset:function(){ezoom.setTransformOrigin(1,0,0,0)},poscalSizeAndPosition:function(o){var e=ezoom.thisImg,t=e[0].naturalWidth||1/0,n=e[0].naturalHeight||1/0,i="odd"==o?n:t,s="odd"==o?t:n,a=$(window).width(),r=$(window).height(),m=Math.min(i,.98*a),l=Math.min(s,.98*r),z=m/i,c=l/s;Math.min(z,c)},setTransformOrigin:function(o,e,t,n){o&&(ezoom.scale=o),null==e&&null==e||(ezoom.rotate=e),null==t&&null==t||(ezoom.translateX=t),null==n&&null==n||(ezoom.translateY=n);var i="scale("+ezoom.scale+") translateX("+ezoom.translateX+"px) translateY("+ezoom.translateY+"px) rotate("+ezoom.rotate+"deg)";ezoom.imgTag.css({"-webkit-transform":i,"-moz-transform":i,"-ms-transform":i,"-o-transform":i,transform:i,"transform-origin":"center center"})},initMouseScrolling:function(){function o(o){ezoom._preventDefault(o);var e=parseInt(o.wheelDelta||-o.detail);if(e>0){if(ezoom.scale+=.1,ezoom.scale>=15)return void(ezoom.scale=15);ezoom.setTransformOrigin()}else{if(ezoom.scale-=.1,ezoom.scale<=.1)return void(ezoom.scale=.1);ezoom.setTransformOrigin()}}var e=navigator.userAgent.indexOf("Firefox")>-1,t=e?"DOMMouseScroll":"mousewheel";document.attachEvent?ezoom.zoomModal[0].attachEvent("on"+t,function(e){o(e)}):document.addEventListener&&ezoom.zoomModal[0].addEventListener(t,function(e){o(e)},!1)},reposition:function(){ezoom.isShow&&ezoom.poscalSizeAndPosition()},initEvent:function(){$(window).on("resize",ezoom.reposition),$(document).on("scroll",ezoom.reposition),ezoom.zoomModal.on("mousedown",function(o){o=o||window.event,ezoom.grabbing=!0,o||(o=window.e,ezoom.zoomModal.onselectstart=function(){return!1}),startX=o.clientX,startY=o.clientY,translateX_=ezoom.translateX,translateY_=ezoom.translateY,ezoom.options.onMoveStarted,"function"==typeof ezoom.options.onMoveStarted&&ezoom.options.onMoveStarted(ezoom)}),$(document).on("mouseup",function(){ezoom.grabbing=!1,translateX_=ezoom.translateX,translateY_=ezoom.translateY,ezoom.options.onMovedCompleted&&"function"==typeof ezoom.options.onMovedCompleted&&ezoom.options.onMovedCompleted(ezoom)}),$(document).on("mousemove",function(o){if(o=o||window.event,ezoom.grabbing){var e=o.clientX,t=o.clientY,n=e-startX,i=t-startY;return ezoom.translateX=translateX_+n,ezoom.translateY=translateY_+i,ezoom.setTransformOrigin(),ezoom._preventDefault(),ezoom.options.onMoving,"function"==typeof ezoom.options.onMoving&&ezoom.options.onMoving(ezoom),!1}}),$(document).on("keydown",function(o){o=o||window.event,ezoom._preventDefault(o),o.keyCode&&ezoom.isShow&&(ezoom.options.hideControlBtn||(37!=o.keyCode&&65!=o.keyCode||ezoom.setTransformOrigin(1,270,0,0),39!=o.keyCode&&68!=o.keyCode||ezoom.setTransformOrigin(1,90,0,0),38!=o.keyCode&&87!=o.keyCode||ezoom.setTransformOrigin(1,0,0,0),40!=o.keyCode&&83!=o.keyCode||ezoom.setTransformOrigin(1,180,0,0)),27==o.keyCode&&ezoom.isShow&&(1!=ezoom.scale||0!=ezoom.rotate||0!=ezoom.translateX||0!=ezoom.translateY?ezoom.reset():ezoom.remove()),82==o.keyCode&&ezoom.doRotate("right"))})},_preventDefault:function(o){return o&&o.preventDefault?o.preventDefault():window.event.returnValue=!1,!1}};